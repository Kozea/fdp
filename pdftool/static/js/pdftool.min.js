/*! pdftool          2014-06-06 */
var files_array;console.log("Starting app"),jQuery.event.props.push("dataTransfer"),files_array=[],$(document).ready(function(){var a,b,c;return window.File&&window.FileReader&&window.FileList&&window.Blob?(b=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),b=a.dataTransfer.files,files_array.push(b),$("#drop").remove(),$("#files ul").append('<li class="pdf_thumbnail">'+b[0].name+"</li>"),$("#sortable").sortable({placeholder:"ui-sortable-placeholder",start:function(a,b){return $(this).attr("data-previndex",b.item.index())},update:function(a,b){var c,d,e;return c=b.item.index(),d=$(this).attr("data-previndex"),e=[files_array[c],files_array[d]],files_array[d]=e[0],files_array[c]=e[1],$(this).removeAttr("data-previndex")}}),c=[]},a=function(a){return a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"},c=function(a){var b,c,d,e,f;for(a.stopPropagation(),a.preventDefault(),b=new FormData,d=e=0,f=files_array.length;f>e;d=++e)c=files_array[d],b.append("files[]",c[0]);return $.ajax({url:$(this).data("url"),type:"POST",cache:!1,processData:!1,contentType:!1,data:b,beforeSend:function(){return $("#loading").show()},success:function(a){var b,e,f,g,h,i,j;for(f=atob(a),g=new Array(f.length),d=i=0,j=g.length;j>i;d=++i)c=g[d],g[d]=f.charCodeAt(d);return e=new Uint8Array(g),b=new Blob([e],{type:"application/pdf"}),h=window.URL.createObjectURL(b),$("#url").attr("href",h),$("#url").show(),$("#loading").hide()}})}):alert("Your browser is outdated. Please consider upgrading to a newer one."),$("#files").bind("dragover",a),$("#files").bind("drop",b),$("#upload-button").bind("click",c)});